<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />
    <meta name="description" content="" />
    <meta name="author" content="" />
    <link rel="icon" href="./img/coruja.1.png" />

    <title>Carrinho</title>
<link rel="stylesheet" href="./css/custom.css">
    <!-- Bootstrap core CSS -->
    <link href="./css/bootstrap.css" rel="stylesheet" />

    <!-- Custom styles for this template -->
    <link href="./css/form-validation.css" rel="stylesheet" />
     <link rel="stylesheet" href="dist/css/main.css">
  </head>
  <body class="bg-light">
    <nav class="navbar navbar-expand-lg navbar navbar-dark bg-dark" style="background: linear-gradient(90deg, #4b0082, #7c3aed);">
      <a class="navbar-brand" href="#">
        <img
          src="./img/coruja.1.png"
          width="30"
          height="30"
          class="d-inline-block align-top"
          alt=""
        />
        LoreOwl
      </a>

      <!-- Botão do menu para mobile -->
      <button
        class="navbar-toggler"
        type="button"
        data-toggle="collapse"
        data-target="#conteudoNavbarSuportado"
        aria-controls="conteudoNavbarSuportado"
        aria-expanded="false"
        aria-label="Alternar navegação"
      >
        <span class="navbar-toggler-icon"></span>
      </button>

      <!-- Links do menu -->
      <div class="collapse navbar-collapse" id="conteudoNavbarSuportado">
        <ul class="navbar-nav mr-auto">
          <li class="nav-item active">
            <a class="nav-link" href="./index.html"
              >Página principal<span class="sr-only">(página atual)</span></a
            >
          </li>

          <li class="nav-item dropdown">
            <a
              class="nav-link dropdown-toggle"
              href="#"
              id="navbarDropdown"
              role="button"
              data-toggle="dropdown"
              aria-haspopup="true"
              aria-expanded="false"
            >
              Mais
            </a>
            <div class="dropdown-menu" aria-labelledby="navbarDropdown">
              <a class="dropdown-item" href="./login.html">Login</a>
              <a class="dropdown-item" href="./cadastro.html">Cadastro</a>
              
            </div>
            <div class="nav-item button"></div>
          </li>
        </ul>
        <!-- Formulário de busca -->
        <form class="form-inline my-2 my-lg-0">
          <input
            class="form-control mr-sm-2"
            type="search"
            placeholder="Buscar Livros..."
            aria-label="Pesquisar"
          />
          <button class="btn btn-secondary " type="submit">
            Buscar
          </button>
            
        </form>
      </div>
    </nav>
    <br>
    <div class="container">
      <div class="row">
        <div class="col-md-4 order-md-2 mb-4">
          <h4 class="d-flex justify-content-between align-items-center mb-3">
            <span class="text-muted">Seu carrinho</span>
            <span class="badge badge-secondary badge-pill">3</span>
          </h4><h5>Total: <span id="total-carrinho">R$ 0,00</span></h5>

          <ul class="list-group mb-3" id="lista-carrinho"></ul>

          <form class="card p-2">
            <div class="input-group">
              <input
                type="text"
                class="form-control"
                placeholder="Código promocional"
              />
              <div class="input-group-append">
                <button type="submit" class="btn btn-secondary">
                  Resgatar
                </button>
              </div>
            </div>
          </form>
        </div>
        <div class="col-md-8 order-md-1">
          <h4 class="mb-3">Endereço de cobrança</h4>
          <form class="needs-validation" novalidate>
            <div class="row">
              <div class="col-md-6 mb-3">
                <label for="firstName">Nome</label>
                <input
                  type="text"
                  class="form-control"
                  id="firstName"
                  placeholder=""
                  value=""
                  required
                />
                <div class="invalid-feedback">É necessário um nome válido.</div>
              </div>
              <div class="col-md-6 mb-3">
                <label for="lastName">Sobrenome</label>
                <input
                  type="text"
                  class="form-control"
                  id="lastName"
                  placeholder=""
                  value=""
                  required
                />
                <div class="invalid-feedback">
                  É necessário um sobrenome válido.
                </div>
              </div>
            </div>

            <div class="mb-3">
              <label for="username">Nome de usuário</label>
              <div class="input-group">
                <div class="input-group-prepend">
                  <span class="input-group-text">@</span>
                </div>
                <input
                  type="text"
                  class="form-control"
                  id="username"
                  placeholder="Nome de usuário"
                  required
                />
                <div class="invalid-feedback" style="width: 100%">
                  Seu nome de usuário é obrigatório.
                </div>
              </div>
            </div>
  
            <div class="mb-3">
              <label for="email"
                >Email <span class="text-muted">(Opcional)</span></label
              >
              <input
                type="email"
                class="form-control"
                id="email"
                placeholder="voce@exemplo.com"
              />
              <div class="invalid-feedback">
                Por favor, insira um endereço de e-mail válido para atualizações
                de envio.
              </div>
            </div>

            <div class="mb-3">
              <label for="address">Endereço</label>
              <input
                type="text"
                class="form-control"
                id="address"
                placeholder="Rua Exemplo, 1234"
                required
              />
              <div class="invalid-feedback">
                Por favor, insira seu endereço de entrega.
              </div>
            </div>

            <div class="mb-3">
              <label for="address2"
                >Endereço 2 <span class="text-muted">(Opcional)</span></label
              >
              <input
                type="text"
                class="form-control"
                id="address2"
                placeholder="Apartamento ou sala"
              />
            </div>

            <div class="row">
              <div class="col-md-5 mb-3">
                <label for="country">País</label>
                <select
                  class="custom-select d-block w-100"
                  id="country"
                  required
                >
                  <option value="">Escolher...</option>
                  <option>Brasil</option>
                  <option>Estados Unidos</option>
                </select>
                <div class="invalid-feedback">
                  Por favor, selecione um país válido.
                </div>
              </div>
              <div class="col-md-4 mb-3">
                <label for="state">Estado</label>
                <select class="custom-select d-block w-100" id="state" required>
                  <option value="">Escolher...</option>
                  <option>São Paulo</option>
                  <option>Rio de Janeiro</option>
                  <option>California</option>
                </select>
                <div class="invalid-feedback">
                  Por favor, forneça um estado válido.
                </div>
              </div>
              <div class="col-md-3 mb-3">
                <label for="zip">CEP</label>
                <input
                  type="text"
                  class="form-control"
                  id="zip"
                  placeholder=""
                  required
                />
                <div class="invalid-feedback">CEP obrigatório.</div>
              </div>
            </div>
            <hr class="mb-4" />
            <div class="custom-control custom-checkbox">
              <input
                type="checkbox"
                class="custom-control-input"
                id="same-address"
              />
              <label class="custom-control-label" for="same-address"
                >O endereço de entrega é o mesmo que meu endereço de
                cobrança</label
              >
            </div>
            <div class="custom-control custom-checkbox">
              <input
                type="checkbox"
                class="custom-control-input"
                id="save-info"
              />
              <label class="custom-control-label" for="save-info"
                >Salvar essas informações para a próxima vez</label
              >
            </div>
            <hr class="mb-4" />

            <h4 class="mb-3">Pagamento</h4>

            <div class="d-block my-3">
              <div class="custom-control custom-radio">
                <input
                  id="credit"
                  name="paymentMethod"
                  type="radio"
                  class="custom-control-input"
                  checked
                  required
                />
                <label class="custom-control-label" for="credit"
                  >Cartão de crédito</label
                >
              </div>
              <div class="custom-control custom-radio">
                <input
                  id="debit"
                  name="paymentMethod"
                  type="radio"
                  class="custom-control-input"
                  required
                />
                <label class="custom-control-label" for="debit"
                  >Cartão de débito</label
                >
              </div>
              <div class="custom-control custom-radio">
                <input
                  id="paypal"
                  name="paymentMethod"
                  type="radio"
                  class="custom-control-input"
                  required
                />
                <label class="custom-control-label" for="paypal">PayPal</label>
              </div>
            </div>
            <div class="row">
              <div class="col-md-6 mb-3">
                <label for="cc-name">Nome no cartão</label>
                <input
                  type="text"
                  class="form-control"
                  id="cc-name"
                  placeholder=""
                  required
                />
                <small class="text-muted"
                  >Nome completo como exibido no cartão</small
                >
                <div class="invalid-feedback">
                  O nome no cartão é obrigatório
                </div>
              </div>
              <div class="col-md-6 mb-3">
                <label for="cc-number">Número do cartão de crédito</label>
                <input
                  type="text"
                  class="form-control"
                  id="cc-number"
                  placeholder=""
                  required
                />
                <div class="invalid-feedback">
                  O número do cartão de crédito é obrigatório
                </div>
              </div>
            </div>
            <div class="row">
              <div class="col-md-3 mb-3">
                <label for="cc-expiration">Validade</label>
                <input
                  type="text"
                  class="form-control"
                  id="cc-expiration"
                  placeholder=""
                  required
                />
                <div class="invalid-feedback">Data de validade obrigatória</div>
              </div>
              <div class="col-md-3 mb-3">
                <label for="cc-cvv">CVV</label>
                <input
                  type="text"
                  class="form-control"
                  id="cc-cvv"
                  placeholder=""
                  required
                />
                <div class="invalid-feedback">
                  Código de segurança obrigatório
                </div>
              </div>
            </div>
            <hr class="mb-4" />
            <button class="btn btn-primary btn-lg btn-block" type="submit">
              Continuar para o checkout
            </button>
          </form>
        </div>
      </div>

      <footer class="my-5 pt-5 text-muted text-center text-small">
        <p class="mb-1">&copy; 2017-2018 Nome da Empresa</p>
        <ul class="list-inline">
          <li class="list-inline-item"><a href="#">Privacidade</a></li>
          <li class="list-inline-item"><a href="#">Termos</a></li>
          <li class="list-inline-item"><a href="#">Suporte</a></li>
        </ul>
      </footer>
    </div>
    <script type="module" src="./services/CarrinhoService.js"></script>
    <script>
      // Seleciona todos os botões "Adicionar ao carrinho"
// Seleciona todos os botões de adicionar ao carrinho
const botoes = document.querySelectorAll('.add-to-cart');
const lista = document.getElementById("lista-carrinho");

// Função para salvar carrinho no localStorage
function salvarCarrinho(carrinho) {
    localStorage.setItem("carrinho", JSON.stringify(carrinho));
}

// Função para mostrar toast estilizado
function mostrarToast(mensagem) {
    const toast = document.createElement('div');
    toast.className = 'toast-custom';
    toast.innerText = mensagem;
    document.body.appendChild(toast);

    setTimeout(() => toast.classList.add('show'), 100);
    setTimeout(() => {
        toast.classList.remove('show');
        setTimeout(() => document.body.removeChild(toast), 500);
    }, 2500);
}

// Função para adicionar item ao carrinho
function adicionarAoCarrinho(titulo, preco){
    let carrinho = JSON.parse(localStorage.getItem("carrinho")) || [];
    carrinho.push({titulo, preco});
    salvarCarrinho(carrinho);
    mostrarCarrinho();
    mostrarToast(`${titulo} adicionado ao carrinho!`);
}

// Função para remover item do carrinho
function removerDoCarrinho(index) {
    let carrinho = JSON.parse(localStorage.getItem("carrinho")) || [];
    const removido = carrinho.splice(index, 1);
    salvarCarrinho(carrinho);
    mostrarCarrinho();
    mostrarToast(`${removido[0].titulo} removido do carrinho!`);
}

// Função para renderizar carrinho na tela
function mostrarCarrinho() {
    let carrinho = JSON.parse(localStorage.getItem("carrinho")) || [];
    lista.innerHTML = '';
    carrinho.forEach((item, index) => {
        const li = document.createElement("li");
        li.classList.add("list-group-item","d-flex","justify-content-between","lh-condensed");
        li.innerHTML = `
            <div>
                <h6 class="my-0">${item.titulo}</h6>
            </div>
            <span class="text-muted">${item.preco}</span>
            <button class="btn btn-sm btn-danger ml-2" onclick="removerDoCarrinho(${index})">Remover</button>
        `;
        lista.appendChild(li);
    });
}

// Inicializa carrinho ao carregar a página
mostrarCarrinho();

// Adiciona eventos aos botões de "Adicionar ao carrinho"
botoes.forEach(btn => {
    btn.addEventListener('click', () => {
        const item = btn.closest('.card-body'); // garante que pegue o card correto
        const titulo = item.querySelector(".card-title").innerText;
        const preco = item.querySelector(".preco").innerText;
        adicionarAoCarrinho(titulo, preco);
    });
});


    </script>
  
    <script>


    </script>

    <script
      src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
      integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
      integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
      integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
      crossorigin="anonymous"
    ></script>

    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script
      src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
      integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
      crossorigin="anonymous"
    ></script>
    <script>
      window.jQuery ||
        document.write(
          '<script src="../../assets/js/vendor/jquery-slim.min.js"><\/script>'
        );
    </script>
    <script src="../../assets/js/vendor/popper.min.js"></script>
    <script src="../../dist/js/bootstrap.min.js"></script>
    <script src="../../assets/js/vendor/holder.min.js"></script>
    <script>
      (function () {
        "use strict";
        window.addEventListener(
          "load",
          function () {
            var forms = document.getElementsByClassName("needs-validation");
            var validation = Array.prototype.filter.call(
              forms,
              function (form) {
                form.addEventListener(
                  "submit",
                  function (event) {
                    if (form.checkValidity() === false) {
                      event.preventDefault();
                      event.stopPropagation();
                    }
                    form.classList.add("was-validated");
                  },
                  false
                );
              }
            );
          },
          false
        );
      })();
    </script>
  </body>
</html>
