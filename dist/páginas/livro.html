<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <!-- Meta tags Obrigatórias -->
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />

    <!-- Bootstrap CSS -->
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css"
      integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO"
      crossorigin="anonymous"
    />
    <link rel="icon" href="./img/coruja.1.png" />
    <link rel="stylesheet" href="./css/bootstrap.css" />
    <link rel="stylesheet" href="./css/custom.css" />
    <title>Detalhes do produto</title>
  </head>
  <body class="bg-light">
    <nav
      class="navbar navbar-expand-lg navbar-lore navbar-dark"
      style="background: linear-gradient(90deg, #4b0082, #7c3aed)"
    >
      <a class="navbar-brand" href="#">
        <img
          src="./img/coruja.1.png"
          width="30"
          height="30"
          class="d-inline-block align-top"
          alt="Logo LoreOwl"
        />
        LoreOwl
      </a>

      <!-- Botão do menu para mobile -->
      <button
        class="navbar-toggler"
        type="button"
        data-toggle="collapse"
        data-target="#conteudoNavbarSuportado"
        aria-controls="conteudoNavbarSuportado"
        aria-expanded="false"
        aria-label="Alternar navegação"
      >
        <span class="navbar-toggler-icon"></span>
      </button>

      <!-- Links do menu -->
      <div class="collapse navbar-collapse" id="conteudoNavbarSuportado">
        <ul class="navbar-nav mr-auto">
          <li class="nav-item active">
            <a class="nav-link" href="./index.html"
              >Página principal<span class="sr-only">(página atual)</span></a
            >
          </li>
          <li class="nav-item">
            <a class="nav-link" href="./carrinho.html" style="color: white">
              Carrinho</a
            >
          </li>
          <li class="nav-item dropdown">
            <a
              class="nav-link dropdown-toggle"
              href="#"
              id="navbarDropdown"
              role="button"
              data-toggle="dropdown"
              aria-haspopup="true"
              aria-expanded="false"
            >
              Mais
            </a>
            <div class="dropdown-menu" aria-labelledby="navbarDropdown">
              <div class="dropdown-divider"></div>
              <a class="dropdown-item" href="#sobre">Sobre</a>
            </div>
          </li>
        </ul>
        <!-- Formulário de busca -->
        <form class="form-inline my-2 my-lg-0">
          <input
            class="form-control mr-sm-2"
            type="search"
            placeholder="Buscar Livros..."
            aria-label="Pesquisar"
          />
          <button class="btn btn-outline-success my-2 my-sm-0" type="submit">
            Buscar
          </button>
        </form>
      </div>
    </nav>

    <div class="container-fluid">
      <div class="row">
        <!-- Coluna da imagem -->

        <div class="col-md-8 mb-4">
          <div class="row bg-white p-3 rounded shadow-sm mt-4">
            <div class="col-12 col-md-7 mb-3">
              <div class="row">
                <div class="col-2">
                  <img
                    src="./img/coruja.1.png"
                    alt="..."
                    width="44"
                    height="44"
                    class="rounded border border-dark-solid-8px"
                  />
                  <img
                    src="./img/coruja.1.png"
                    alt="..."
                    width="44"
                    height="44"
                    class="rounded border border-dark-solid-8px"
                  />
                  <img
                    src="./img/coruja.1.png"
                    alt="..."
                    width="44"
                    height="44"
                    class="rounded border border-dark-solid-8px"
                  />
                </div>

                <div class="col-10">
                  <figure class="figure">
                    <img
                      src="./img/bcd05ed6-c44d-4e3f-953d-ee479c993aa3.png"
                      class="figure-img img-fluid rounded"
                      alt="Imagem de um quadrado genérico com bordas arredondadas, em uma figure."
                      style="min-width: 380px; max-height: 300px"
                    />
                  </figure>
                  
                </div>
              </div>
            </div>

            <div class="col-12 col-md-5 mb-6">
              <div
                class="d-flex justify-content-between align-items-center mb-2"
              >
                <span class="small text-muted">Novo | +100 vendidos</span>
                <div>
                  <i class="fas fa-share-alt mr-2"></i>
                  <i class="far fa-heart"></i>
                </div>
              </div>
              <h2 id="bookTitle" class="h4"></h2>
              <h3 id="bookAuthor"></h3>
              <div class="d-flex align-items-center mb-2">
                <div class="product-rating">
                  <i class="fas fa-star"></i>
                  <i class="fas fa-star"></i>
                  <i class="fas fa-star"></i>
                  <i class="fas fa-star"></i>
                  <i class="fas fa-star-half-alt"></i>
                </div>
                <span class="small text-muted ml-2" id="bookRating"
                  >(1868 avaliações)</span
                >
              </div>
              <h3 class="h5 font-weight-bold text-danger" id="bookPrice"></h3>
              <div class="d-flex align-items-center">
                <span class="original-price mr-2" id="bookOriginalPrice"
                  >R$ 30,00</span
                >
                <span class="discount-badge" id="bookDiscount">30% OFF</span>
              </div>
              <div class="mb-3">
                <p class="small text-muted mb-0" id="bookInstallments">
                  ou em 12x de R$ 2,17 sem juros
                </p>
              </div>
              
            </div> <hr>
           
          </div>
            
          

<div class="row bg-white p-3 rounded shadow-sm mt">
  <div id="cardCarousel1" class="carousel slide" data-ride="carousel">
    <h2 style="font-size: 20px;"> <b>Produtos Relacionados</b> </h2>
    <div class="carousel-inner">
      <!-- Slide 1 -->
      <div class="carousel-item active">
        <div class="d-flex justify-content-center">
          <div class="card" style="width: 15rem; margin: 0 10px">
            <img class="card-img-top" src="./img/assets_task_01jxg11vxsetvscb452b0at8zd_1749663486_img_3.webp" alt="Card 1" />
            <div class="card-body">
              <p class="card-text">Texto do Card 1.</p>
            </div>
          </div>
          <div class="card" style="width: 15rem; margin: 0 10px">
            <img class="card-img-top" src="./img/assets_task_01jxg11vxsetvscb452b0at8zd_1749663486_img_3.webp" alt="Card 1" />
            <div class="card-body">
              <p class="card-text">Texto do Card 1.</p>
            </div>
          </div>
          <div class="card" style="width: 15rem; margin: 0 10px">
            <img class="card-img-top" src="./img/assets_task_01jxg11vxsetvscb452b0at8zd_1749663486_img_3.webp" alt="Card 1" />
            <div class="card-body">
              <p class="card-text">Texto do Card 1.</p>
            </div>
          </div>
        </div>
      </div>

      <!-- Slide 2 -->
      <div class="carousel-item">
        <div class="d-flex justify-content-center">
          <div class="card" style="width: 15rem; margin: 0 10px">
            <img class="card-img-top" src="./img/assets_task_01jxms2q6aegm8hd2xfzhm9x3r_1749822857_img_3.webp" alt="Card 2" />
            <div class="card-body">
              <p class="card-text">Texto do Card 2.</p>
            </div>
          </div>
          <div class="card" style="width: 15rem; margin: 0 10px">
            <img class="card-img-top" src="./img/assets_task_01jxms2q6aegm8hd2xfzhm9x3r_1749822857_img_3.webp" alt="Card 2" />
            <div class="card-body">
              <p class="card-text">Texto do Card 2.</p>
            </div>
          </div>
          <div class="card" style="width: 15rem; margin: 0 10px">
            <img class="card-img-top" src="./img/assets_task_01jxms2q6aegm8hd2xfzhm9x3r_1749822857_img_3.webp" alt="Card 2" />
            <div class="card-body">
              <p class="card-text">Texto do Card 2.</p>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Controles corretos -->
    <a class="carousel-control-prev" href="#cardCarousel1" role="button" data-slide="prev" style="background-color:rgb(58, 0, 58); width: 40px; height: 40px; top:180px; left:20px">
      <span class="carousel-control-prev-icon"></span>
    </a>
    <a class="carousel-control-next" href="#cardCarousel1" role="button" data-slide="next" style="background-color:rgb(58, 0, 58); width: 40px; height: 40px; top:180px; right: 20px;">
      <span class="carousel-control-next-icon"></span>
    </a>
  </div>
</div>

<div class="row bg-white p-3 rounded shadow-sm mt">
  <div id="cardCarousel2" class="carousel slide" data-ride="carousel">
    <h2 style="font-size: 20px;"><b>Produtos de LoreOwl</b></h2>
    <div class="carousel-inner">
      <!-- Slide 1 -->
      <div class="carousel-item active">
        <div class="d-flex justify-content-center">
          <div class="card produto-card" style="width: 15rem; margin: 0 10px">
            <img class="card-img-top" src="./img/assets_task_01jxg11vxsetvscb452b0at8zd_1749663486_img_3.webp" alt="Card 1" />
            <div class="card-body">
              <p class="card-text">Texto do Card 1.</p>
            </div>
          </div>
          <div class="card produto-card" style="width: 15rem; margin: 0 10px">
            <img class="card-img-top" src="./img/assets_task_01jxg11vxsetvscb452b0at8zd_1749663486_img_3.webp" alt="Card 1" />
            <div class="card-body">
              <p class="card-text">Texto do Card 1.</p>
            </div>
          </div>
        </div>
      </div>

      <!-- Slide 2 -->
      <div class="carousel-item">
        <div class="d-flex justify-content-center">
          <div class="card produto-card" style="width: 15rem; margin: 0 10px">
            <img class="card-img-top" src="./img/assets_task_01jxms2q6aegm8hd2xfzhm9x3r_1749822857_img_3.webp" alt="Card 2" />
            <div class="card-body">
              <p class="card-text">Texto do Card 2.</p>
            </div>
          </div>
          <div class="card produto-card" style="width: 15rem; margin: 0 10px">
            <img class="card-img-top" src="./img/assets_task_01jxms2q6aegm8hd2xfzhm9x3r_1749822857_img_3.webp" alt="Card 2" />
            <div class="card-body">
              <p class="card-text">Texto do Card 2.</p>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Controles corretos -->
    <a class="carousel-control-prev" href="#cardCarousel2" role="button" data-slide="prev" style="background-color:rgb(58, 0, 58); width: 40px; height: 40px; margin-top: 100px; left: 20px;">
      <span class="carousel-control-prev-icon"></span>
    </a>
    <a class="carousel-control-next" href="#cardCarousel2" role="button" data-slide="next" style="background-color:rgb(58, 0, 58); width: 40px; height: 40px; margin-top: 100px; right: 20px;">
      <span class="carousel-control-next-icon"></span>
    </a>
  </div>
</div>

        </div>
            

        <!-- Coluna das infos -->
        <div class="col-md-4 mb-4">
          <div class="bg-white p-3 rounded shadow-sm">
            <div class="mb-3">
              <p class="mb-1">
                <i class="fas fa-truck text-success mr-1"></i>
                <span class="shipping-badge">Frete grátis</span>
                <span class="text-success font-weight-bold">Amanhã</span>
              </p>
              <p class="small text-muted mb-0">
                Comprando dentro das próximas 12h e 53min
              </p>

              <p class="mt-2 mb-0">
                <i class="fas fa-store text-info mr-1"></i>
                <span class="text-info"
                  >Retire grátis amanhã em uma de nossas livrarias</span
                >
              </p>
            </div>
            <div class="buy-box mb-3">
              <p class="mb-1">
                Quantidade: <span class="stock-badge"> 1 unidade</span>
              </p>
              <p class="mb-2 small text-muted">Mais de 50 disponíveis</p>
              <div class="d-flex">
                <button class="btn btn-primary btn-block mr-2" id="buyButton">
                  Comprar agora
                </button>
                <button
                  class="btn btn-outline-secondary add-to-cart"
                  id="cartBtn"
                  aria-label="Adicionar ao carrinho"
                >
                  Adicionar
                  <span class="text"></span>
                </button>
              </div>
            </div>
            <div class="free-return small">
              <i class="fas fa-undo-alt"></i> Devolução grátis. Você tem 30 dias
              a partir da data de recebimento.
            </div>
          </div>

          <div class="bg-white p-3 rounded shadow-sm mt-3">
            <h5 class="mb-2">Informações do vendedor</h5>
            <div class="seller-badge">
              <p class="mb-1"><strong>LoreOwl Livraria</strong></p>
              <p class="mb-1 small">
                <i class="fas fa-map-marker-alt text-muted mr-1"></i> São Paulo,
                Brasil
              </p>
              <p class="mb-0 small text-success">
                <i class="fas fa-check-circle mr-1"></i> MercadoLíder Platinum
              </p>
            </div>
          </div>

          <div class="row mt-4">
            <div class="col-12">
              <div class="bg-white p-3 rounded shadow-sm">
                <h5>O que você precisa saber deste produto</h5>
                <div class="row mt-3">
                  <div class="col-md-6">
                    <div class="product-feature">
                      <p class="mb-0">
                        <i class="fas fa-book-open mr-2 text-primary"></i
                        ><strong>Gênero:</strong>
                        <span id="bookGenre">Ficção</span>
                      </p>
                    </div>
                    <div class="product-feature">
                      <p class="mb-0">
                        <i class="fas fa-language mr-2 text-primary"></i
                        ><strong>Idioma:</strong> Português
                      </p>
                    </div>
                  </div>
                  <div class="col-md-6">
                    <div class="product-feature">
                      <p class="mb-0">
                        <i class="fas fa-calendar mr-2 text-primary"></i
                        ><strong>Ano de publicação:</strong>
                        <span id="bookYear">2022</span>
                      </p>
                    </div>
                    <div class="product-feature">
                      <p class="mb-0">
                        <i class="fas fa-file-alt mr-2 text-primary"></i
                        ><strong>Páginas:</strong>
                        <span id="bookPages">350</span>
                      </p>
                    </div>
                    <div class="product-feature">
                      <p class="mb-0">
                        <i class="fas fa-industry mr-2 text-primary"></i
                        ><strong>Editora:</strong>
                        <span id="bookPublisher">Editora Lore</span>
                      </p>
                    </div>
                    <div class="product-feature">
                      <p class="mb-0">
                        <i class="fas fa-weight mr-2 text-primary"></i>
                        <strong>Peso:</strong> 450g
                      </p>
                    </div>
                  </div>
                </div>
                <hr class="my-4" />
                <h5>Descrição</h5>
                <p id="bookDescription" class="text-justify"></p>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Modal -->
      <div
        class="modal fade"
        id="buyModal"
        tabindex="-1"
        role="dialog"
        aria-labelledby="buyModalLabel"
        aria-hidden="true"
      ></div>
    </div>

    <script src="./banco/carrinho.js"></script>

    <script>
      document.addEventListener("DOMContentLoaded", () => {
        // Pega parâmetros da URL
        const params = new URLSearchParams(window.location.search);

        // Tenta pegar do localStorage caso URL não exista
        const livroLS = JSON.parse(localStorage.getItem("livroSelecionado"));

        const livro = params.has("title")
          ? {
              titulo: params.get("title"),
              author: params.get("author") || "Autor desconhecido",
              preco: params.get("price") || "0.00",
              img: params.get("img") || "",
              descricao:
                params.get("description") || "Descrição não disponível",
            }
          : livroLS;

        if (!livro) {
          window.location.href = "../index.html"; // volta pro catálogo se não houver livro
          return;
        }

        // Atualiza a página com as informações do livro
        const tituloEl = document.getElementById("bookTitle");
        const authorEl = document.getElementById("bookAuthor");
        const precoEl = document.getElementById("bookPrice");
        const imgEl = document.getElementById("bookImg");
        const descEl = document.getElementById("bookDescription");

        if (tituloEl) tituloEl.innerText = livro.titulo;
        if (authorEl) authorEl.innerText = "Autor: " + livro.author;
        if (precoEl) precoEl.innerText = "R$ " + livro.preco;
        if (imgEl) {
          // força caminho correto para /páginas/img/...
          imgEl.src = livro.img.startsWith("./")
            ? livro.img.replace(/^\.\/|^\//, "")
            : livro.img;
          imgEl.alt = `Capa do livro ${livro.titulo}`;
        }
        if (descEl) descEl.innerText = livro.descricao;

        // Botão ler
        const btnLer = document.getElementById("readButton");
        if (btnLer) {
          btnLer.addEventListener("click", () => {
            window.location.href = `leitura.html?title=${encodeURIComponent(
              livro.titulo
            )}&author=${encodeURIComponent(livro.author)}`;
          });
        }

        // Botão adicionar ao carrinho
        const cartBtn = document.getElementById("cartBtn");
        const cartText = cartBtn?.querySelector(".text");
        if (cartBtn) {
          cartBtn.addEventListener("click", () => {
            if (cartBtn.classList.contains("success")) return;

            const carrinho = JSON.parse(localStorage.getItem("carrinho")) || [];
            carrinho.push(livro);
            localStorage.setItem("carrinho", JSON.stringify(carrinho));

            cartBtn.classList.add("success");
            if (cartText) {
              cartText.innerText = "Adicionado!";
              cartText.classList.add("success");
            }

            setTimeout(() => {
              cartBtn.classList.remove("success");
              if (cartText) {
                cartText.innerText = "";
                cartText.classList.remove("success");
              }
            }, 2000);
          });
        }

        // Remove o livro selecionado ao sair da página
        window.addEventListener("beforeunload", () => {
          localStorage.removeItem("livroSelecionado");
        });
      });
    </script>

    <script src="./banco/livro.js"></script>
    <!-- JavaScript (Opcional) -->
    <!-- jQuery primeiro, depois Popper.js, depois Bootstrap JS -->
    <script
      src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
      integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"
      integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"
      integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy"
      crossorigin="anonymous"
    ></script>
  </body>
</html>
